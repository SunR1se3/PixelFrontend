<p class="display-4 text-center">Теперь выберите необходимые параметры</p>

<div class="container mt-5">
    <form class="form border mx-auto" [formGroup]="tirajForm">
        <div class="container">
            <div class="row">
                <div class="col-sm">
                    <p class="lead">Размер</p>
                </div>
                <div class="col-sm help-box">
                    <span class="d-inline-block informer" tabindex="0" data-bs-toggle="popover" data-bs-trigger="hover focus"
                        data-bs-content="Это формат бумаги. А4 - стандартная офисная бумага, А5 - меньше, А6 еще меньше.">
                        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
                            xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="512px" height="512px"
                            viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">
                            <g>
                                <g>
                                    <path d="M256,0C114.609,0,0,114.609,0,256c0,141.391,114.609,256,256,256c141.391,0,256-114.609,256-256
                           C512,114.609,397.391,0,256,0z M256,472c-119.297,0-216-96.703-216-216S136.703,40,256,40s216,96.703,216,216S375.297,472,256,472
                           z" />
                                    <rect x="240" y="352" width="32" height="32" />
                                    <path d="M317.734,150.148c-6.484-6.625-14.688-11.922-24.767-16.031c-10.202-4.102-22.172-6.117-36.28-6.117
                           c-11.97,0-22.875,2.016-32.781,6.117c-9.938,4.109-18.5,9.773-25.688,17.125c-7.125,7.289-12.672,14.508-16.5,24.773
                           C177.906,186.281,176,192,176,208h32.656c0-16,4.234-28.109,12.938-38.516c8.594-10.453,20.266-14.82,35.093-14.82
                           c14.438,0,25.234,3.914,32.172,10.938c6.875,7.023,10.392,17.086,10.392,29.797c0,9.883-3.25,18.758-9.733,26.492
                           c-6.375,7.75-13.359,15.297-20.845,22.438c-7.594,7.141-13.672,14.766-19.953,22.641c-6.281,7.875-8.72,17.046-8.72,27.499V320h32
                           v-13.75c0-8.203,1.203-15.312,4.406-21.516c3.094-6.219,6.953-11.859,11.844-16.892c4.734-5.094,9.812-10,15.469-14.828
                           c5.5-4.766,10.781-9.859,15.531-15.172c4.844-5.344,8.875-11.344,11.938-17.969c3.22-6.625,4.828-14.406,4.828-23.477
                           c0-7.875-1.422-15.891-4.391-24.039C328.719,164.148,324.031,156.766,317.734,150.148z" />
                            </g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g>
                        </svg>
                    </span>
                </div>
                <div class="col-sm"></div>
                <div class="col-sm"></div>
                <div class="col-sm"></div>
            </div>
            <div class="row">
                <div class="col-sm" *ngFor="let item of sizeData">
                    <input type="radio" class="btn-check" value="{{ item.id }}" name="size" formControlName="size"
                        id="{{ item.id }}" autocomplete="off" checked>
                    <label class="btn btn-outline-success" for="{{ item.id }}">{{ item.title }}</label>
                </div>
            </div>

            <div class="row mt-3">
                <div class="col-sm">
                    <p class="lead">Материал</p>
                </div>
                <div class="col-sm help-box">
                    <span class="d-inline-block informer" tabindex="0" data-bs-toggle="popover" data-bs-trigger="hover focus"
                        data-bs-content="Белая бумага без покрытия подходит для печати документов, а для визиток - вся остальная. Бумага Touch Cover обладает приятным внешним видом,
                        обычно ее используют для изделий премиум класса.">
                        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
                            xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="512px" height="512px"
                            viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">
                            <g>
                                <g>
                                    <path d="M256,0C114.609,0,0,114.609,0,256c0,141.391,114.609,256,256,256c141.391,0,256-114.609,256-256
                           C512,114.609,397.391,0,256,0z M256,472c-119.297,0-216-96.703-216-216S136.703,40,256,40s216,96.703,216,216S375.297,472,256,472
                           z" />
                                    <rect x="240" y="352" width="32" height="32" />
                                    <path d="M317.734,150.148c-6.484-6.625-14.688-11.922-24.767-16.031c-10.202-4.102-22.172-6.117-36.28-6.117
                           c-11.97,0-22.875,2.016-32.781,6.117c-9.938,4.109-18.5,9.773-25.688,17.125c-7.125,7.289-12.672,14.508-16.5,24.773
                           C177.906,186.281,176,192,176,208h32.656c0-16,4.234-28.109,12.938-38.516c8.594-10.453,20.266-14.82,35.093-14.82
                           c14.438,0,25.234,3.914,32.172,10.938c6.875,7.023,10.392,17.086,10.392,29.797c0,9.883-3.25,18.758-9.733,26.492
                           c-6.375,7.75-13.359,15.297-20.845,22.438c-7.594,7.141-13.672,14.766-19.953,22.641c-6.281,7.875-8.72,17.046-8.72,27.499V320h32
                           v-13.75c0-8.203,1.203-15.312,4.406-21.516c3.094-6.219,6.953-11.859,11.844-16.892c4.734-5.094,9.812-10,15.469-14.828
                           c5.5-4.766,10.781-9.859,15.531-15.172c4.844-5.344,8.875-11.344,11.938-17.969c3.22-6.625,4.828-14.406,4.828-23.477
                           c0-7.875-1.422-15.891-4.391-24.039C328.719,164.148,324.031,156.766,317.734,150.148z" />
                            </g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g>
                        </svg>
                    </span>
                </div>
                <div class="col-sm"></div>
                <div class="col-sm"></div>
                <div class="col-sm"></div>
            </div>

            <select class="form-select" name="material" formControlName="material" aria-label="Default select example">
                <option *ngFor="let item of materialData" value="{{ item.id }}">{{ item.title }}</option>
            </select>

            <div class="row mt-3">
                <div class="col-sm">
                    <p class="lead">Плотность</p>
                </div>
                <div class="col-sm help-box">
                    <span class="d-inline-block informer" tabindex="0" data-bs-toggle="popover" data-bs-trigger="hover focus"
                        data-bs-content="Плотность измеряется в граммах на квадратный метр (г/кв. м). Стандартное значение для офисных нужд — это 75–90 г/кв. м. Плотность 80 г/кв. м
                         считается универсальной, поскольку она хорошо подходит для цифровых копировальных и печатных аппаратов, включая лазерные и струйные модели.">
                        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
                            xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="512px" height="512px"
                            viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">
                            <g>
                                <g>
                                    <path d="M256,0C114.609,0,0,114.609,0,256c0,141.391,114.609,256,256,256c141.391,0,256-114.609,256-256
                           C512,114.609,397.391,0,256,0z M256,472c-119.297,0-216-96.703-216-216S136.703,40,256,40s216,96.703,216,216S375.297,472,256,472
                           z" />
                                    <rect x="240" y="352" width="32" height="32" />
                                    <path d="M317.734,150.148c-6.484-6.625-14.688-11.922-24.767-16.031c-10.202-4.102-22.172-6.117-36.28-6.117
                           c-11.97,0-22.875,2.016-32.781,6.117c-9.938,4.109-18.5,9.773-25.688,17.125c-7.125,7.289-12.672,14.508-16.5,24.773
                           C177.906,186.281,176,192,176,208h32.656c0-16,4.234-28.109,12.938-38.516c8.594-10.453,20.266-14.82,35.093-14.82
                           c14.438,0,25.234,3.914,32.172,10.938c6.875,7.023,10.392,17.086,10.392,29.797c0,9.883-3.25,18.758-9.733,26.492
                           c-6.375,7.75-13.359,15.297-20.845,22.438c-7.594,7.141-13.672,14.766-19.953,22.641c-6.281,7.875-8.72,17.046-8.72,27.499V320h32
                           v-13.75c0-8.203,1.203-15.312,4.406-21.516c3.094-6.219,6.953-11.859,11.844-16.892c4.734-5.094,9.812-10,15.469-14.828
                           c5.5-4.766,10.781-9.859,15.531-15.172c4.844-5.344,8.875-11.344,11.938-17.969c3.22-6.625,4.828-14.406,4.828-23.477
                           c0-7.875-1.422-15.891-4.391-24.039C328.719,164.148,324.031,156.766,317.734,150.148z" />
                            </g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g>
                        </svg>
                    </span>
                </div>
                <div class="col-sm"></div>
                <div class="col-sm"></div>
                <div class="col-sm"></div>
            </div>
            <div class="row row-density">
                <div *ngFor="let item of densityData" class="col col-density">
                    <input type="radio" class="btn-check" value="{{ item.id }}" name="density" formControlName="density"
                        id="{{ item.id }}" autocomplete="off">
                    <label class="btn btn-outline-success" for="{{ item.id }}">{{ item.title }}</label>
                </div>
            </div>

            <div class="row mt-3">
                <div class="col-sm">
                    <p class="lead">Цветность</p>
                </div>
                <div class="col-sm help-box">
                    <span class="d-inline-block informer" tabindex="0" data-bs-toggle="popover" data-bs-trigger="hover focus"
                        data-bs-content="Например, обозначение 4+4 свидетельствует, что печатное изделие будет полностью цветным.
                         На него краска будет нанесена с двух сторон. При цветной печати используется краска четырех оттенков.
                         Это голубой, желтый, черный, малиновый. Это четыре базовых оттенка, используемых в полиграфии.
                         Именно по их количеству и была выведена формула цветности при печати.">
                        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
                            xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="512px" height="512px"
                            viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">
                            <g>
                                <g>
                                    <path d="M256,0C114.609,0,0,114.609,0,256c0,141.391,114.609,256,256,256c141.391,0,256-114.609,256-256
                           C512,114.609,397.391,0,256,0z M256,472c-119.297,0-216-96.703-216-216S136.703,40,256,40s216,96.703,216,216S375.297,472,256,472
                           z" />
                                    <rect x="240" y="352" width="32" height="32" />
                                    <path d="M317.734,150.148c-6.484-6.625-14.688-11.922-24.767-16.031c-10.202-4.102-22.172-6.117-36.28-6.117
                           c-11.97,0-22.875,2.016-32.781,6.117c-9.938,4.109-18.5,9.773-25.688,17.125c-7.125,7.289-12.672,14.508-16.5,24.773
                           C177.906,186.281,176,192,176,208h32.656c0-16,4.234-28.109,12.938-38.516c8.594-10.453,20.266-14.82,35.093-14.82
                           c14.438,0,25.234,3.914,32.172,10.938c6.875,7.023,10.392,17.086,10.392,29.797c0,9.883-3.25,18.758-9.733,26.492
                           c-6.375,7.75-13.359,15.297-20.845,22.438c-7.594,7.141-13.672,14.766-19.953,22.641c-6.281,7.875-8.72,17.046-8.72,27.499V320h32
                           v-13.75c0-8.203,1.203-15.312,4.406-21.516c3.094-6.219,6.953-11.859,11.844-16.892c4.734-5.094,9.812-10,15.469-14.828
                           c5.5-4.766,10.781-9.859,15.531-15.172c4.844-5.344,8.875-11.344,11.938-17.969c3.22-6.625,4.828-14.406,4.828-23.477
                           c0-7.875-1.422-15.891-4.391-24.039C328.719,164.148,324.031,156.766,317.734,150.148z" />
                            </g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g>
                        </svg>
                    </span>
                </div>
                <div class="col-sm"></div>
                <div class="col-sm"></div>
                <div class="col-sm"></div>
            </div>
            <div class="row">
                <select class="form-select" name="color" formControlName="color" aria-label="color-select"
                    (change)="onColorCountChange()">
                    <option *ngFor="let item of colorData" value="{{ item.id }}">{{ item.title }}</option>
                </select>
                <input *ngFor="let i of countColorInput; let j = index" type="color"
                    class="form-control form-control-color" (change)="onColorChange()" value="{{ colors[j] }}">
            </div>

            <div class="row mt-3">
                <div class="col-sm">
                    <p class="lead">Тираж</p>
                    <input class="form-control" formControlName="count" type="number" min="100" max="20000" value="100">
                </div>
                <div class="col-sm">
                    <p class="lead">Когда нужно сделать?</p>
                    <input class="form-control" formControlName="deadlineDate" type="date"
                        min="{{ currentDate | date:'yyyy-MM-dd' }}">
                </div>
            </div>
            <div class="row mt-5">
                <div class="col">
                    <button class="btn btn-primary" (click)="calculateCost()">Рассчитать стоимость</button>
                </div>
            </div>

            <div class="container" *ngIf="showTable">
                <table class="table mt-5">
                    <thead>
                        <tr>
                            <th scope="col">Тираж (шт)
                            </th>
                            <th scope="col">Срок изготовления
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td scope="row">{{ tirajForm.value.count }}</td>
                            <td>{{ tirajForm.value.deadlineDate }}</td>
                        </tr>
                        <tr>
                            <th><strong>ИТОГ: </strong></th>
                            <td>{{ finalPrice }}</td>
                        </tr>
                    </tbody>
                </table>
                <!-- Button trigger modal -->
                <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                    data-bs-target="#exampleModal">Оформить заказ</button>
            </div>
        </div>
    </form>

    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Почти готово...</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form [formGroup]="userInfo" (ngSubmit)="dataToString()" enctype="multipart/form-data"
                        method="post">
                        <div class="mb-3">
                            <label for="user_name" class="form-label">Как к Вам обращаться?</label>
                            <input formControlName="username" [class.is-invalid]="usernameControl?.invalid && usernameControl?.touched" type="text" class="form-control" id="user_name"
                            placeholder="Иван">
                            <div class="invalid-feedback" *ngIf="usernameControl?.hasError('required')">
                                Поле не должно быть пустым
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="phone" class="form-label">Номер телефона</label>
                            <input formControlName="phone" [class.is-invalid]="phoneControl?.invalid && phoneControl?.touched" type="text" class="form-control" id="phone"
                                placeholder="+79787714837">
                            <div class="invalid-feedback" *ngIf="phoneControl?.hasError('required')">
                                Поле не должно быть пустым
                            </div>
                            <div class="invalid-feedback" *ngIf="phoneControl?.hasError('pattern')">
                                Неверный формат номера телефона
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="email" class="form-label">Email</label>
                            <input formControlName="email" [class.is-invalid]="emailControl?.invalid && emailControl?.touched" type="text" class="form-control" id="email"
                                placeholder="ivan@mail.ru">
                            <div class="invalid-feedback" *ngIf="emailControl?.hasError('required')">
                                Поле не должно быть пустым
                            </div>
                            <div class="invalid-feedback" *ngIf="emailControl?.hasError('email')">
                                Неверный формат email'a
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="file" class="form-label">Сюда нужно загрузить файл для печати</label>
                            <input formControlName="file" type="file" class="form-control" [class.is-invalid]="fileControl?.invalid && fileControl?.touched" id="file"
                                (change)="saveFile($event)">
                            <div class="invalid-feedback" *ngIf="emailControl?.hasError('required')">
                                Необходимо прикрепить файл
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary" *ngIf="!uploadButton">Отправить</button>
                        <button class="btn btn-primary" type="button" disabled *ngIf="uploadButton">
                            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                            <span class="visually-visible">Загрузка...</span>
                        </button>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>
</div>